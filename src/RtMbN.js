importScripts("SJOja.js");cb={NOTE_BODY_REGEX:/<!--note_contents-->\s*(<div[^>]*[^>\"']*_note_title_area[^>]*>(.*)<\/div>\s*<div[^>]*[^>\"']*_note_contents_area[^>]*>(.*)<\/div>)\s*<!--end_note_contents-->/i,PRE_BODY_REGEX:/<div[^>]*[^>\"']*_note_contents[^>]*>\s*(<div[^>]*[^>\"']*_note_title_area[^>]*>(.*)<\/div>\s*<div[^>]*[^>\"']*_note_contents_area[^>]*>(.*)<\/div>)\s*<\/div>\s*<\/body>\s*<\/html>/i,PRE_BODY_REGEX2:/<div[^>]*[^>\"']*_note_contents[^>]*>\s*(<div[^>]*[^>\"']*_note_title_area[^>]*>(.*)<\/div>\s*<div[^>]*[^>\"']*_note_contents_area[^>]*>(.*)<\/div>)\s*<\/div>\s*<\/div>\s*<\/body>\s*<\/html>/i,fileReaderByNote:new FileReader,FUH:function(e){e&&(ED[cd][hp]=JSON.parse(e))},pushLineConfig:function(e){ED[LS]=e[LS]?e[LS]:ED[LS],ED.LEGY_ENCRYPT_KEY=e.LEGY_ENCRYPT_KEY||ED.LEGY_ENCRYPT_KEY,ED[Pd]=e[Pd]||ED[Pd],ED.B=e.B||ED.B,ED[Xh]=e[Xh]||ED[Xh],ED.A=e.A||ED.A,ED[Zs]=e[Zs]||ED[Zs],ED[oa]=e[oa]||ED[oa],ED[cd]=e[cd]||ED[cd]},Ysg:function(e,t,i){var s=[],o=0;cb.QBq(0,i,t,function(t){t&&s.push(t),++o%10==0&&(reply("Ysg"+e,{callbackType:"receiving",value:s}),s=[],t=null),o>=i[AS]&&reply("Ysg"+e,{callbackType:"success",value:s})})},QBq:function(e,t,i,s){e>=t[AS]||cb.EdiIlbUSKP(t[e].url,t[e].memoAttributes,function(o,r){if(!o)return s(),void cb.QBq(++e,t,i,s);function n(e,t){if(e){var i=e.replace(/[\r|\n]/g,"").match(cb.NOTE_BODY_REGEX);null==i&&null==(i=e.replace(/[\r|\n]/g,"").match(cb.PRE_BODY_REGEX))&&null==(i=e.replace(/[\r|\n]/g,"").match(cb.PRE_BODY_REGEX2))&&(i=["","",""]);var o=i[2],r=i[1];t.title=o,t.contents=r,t.isUpdatedContents=!1,s(t),i=null}else s()}o&&"application/zip"==o[Ay]?cb.BRyUFvLTRw(o,r,function(o){n(o,r),cb.QBq(++e,t,i,s)}.bind(this)):cb.FPLCGZAshw(o,{},function(o){n(o,r),cb.QBq(++e,t,i,s)}.bind(this))},function(){s(),cb.QBq(++e,t,i,s)},"blob",{mid:i,channelToken:ED[Xh]})},uqxZuHXFjS:function(e,t){return e?e.replace(/<\!--([\s\S]*?)-->/g," ").replace(/<(script|style|link)([\s\S]*?)(<\/script|style|link)>/gi," ").replace(/<iframe[^>]+>/gi," ").replace(/<([^>]+)>/gi,function(e){return t&&!1===t.removeImage||(e=e.replace(/\ssrc=["']?([^>"']+)["']?[^>]/gi,function(e,t){return t.search(/^data:image\/[^;]+;base64\,/)<0?e.replace(t,""):e})),e.replace(/\s(on[A-Za-z]+\s*?=\s*[^>|^\s]*)/g,"").replace(/href\s*=\s*["'](.*?)["']/gi,"").replace(/url\(([^)]+)\)/gi,"")}):e},EdiIlbUSKP:function(e,t,i,s,o,r){cb.OsfjFXZHly(e,cb.KlGiLrKrvS(r),o,function(e){i(e,t)},s)},KlGiLrKrvS:function(e){return{"X-Line-Mid":e[hm],"X-Line-ChannelToken":e.channelToken,"x-lal":ED[LS],"X-Line-Application":ED.D[ED.A]+"\t"+ED.B+"\t"+ED[Gf]+"\t"+ED.C}},BRyUFvLTRw:function(e,t,i){try{cb.FFsVoJWTVN(e,null,function(s){if(!s)return i&&i(),void(e=null);JSZip.loadAsync(s).then(e=>{return s=null,(e[Ly](t.fileName+".html")||e[Ly](t.fileName+".memo")||e[Ly](t.fileName+".note")).async("string").then(e=>{i(e,t)})}).catch(e=>{i&&i()}).finally(()=>{e=null})})}catch(e){i&&i()}},FFsVoJWTVN:function(e,t,i){var s=cb.fileReaderByNote;s.onload=function(){e=null,i(s[aS],t)},s.onerror=function(){i(null,t)},s.readAsArrayBuffer(e)},FPLCGZAshw:function(e,t,i){var s=new FileReader;s.onload=function(){i(s[aS],t)},s.onerror=function(e){i("",t)},s.readAsText(e)},OsfjFXZHly:function(e,t,i,s,o){var r=new XMLHttpRequest;if(r.open("GET",e,!0),r[ou]=i,r[KT]=1e4,t)for(var n in t)r.setRequestHeader(n,t[n]);r.onload=function(){if(4==r.readyState&&200==r[sS]){var e=r.response;s(e)}else o()},r.onerror=o,r.ontimeout=function(){r.abort(),o()},r.send()}};onmessage=function(e){if(e.data instanceof Object&&e.data.hasOwnProperty("method")&&e.data.hasOwnProperty("arguments")){var t=Array.prototype.slice.call(e.data.arguments);cb[e.data[DS]].apply(self,t)}};reply=function(){if(arguments[AS]<1)throw new TypeError("reply - not enough arguments");postMessage({method:arguments[0],arguments:Array.prototype.slice.call(arguments,1)})}